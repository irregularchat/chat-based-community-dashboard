/* Mobile-specific styles */
@media (max-width: 768px) {
    /* General typography adjustments */
    body {
        font-size: 14px;
    }
    
    h1 {
        font-size: 1.8rem !important;
        margin-bottom: 15px !important;
    }
    
    h2 {
        font-size: 1.5rem !important;
        margin-bottom: 12px !important;
    }
    
    h3 {
        font-size: 1.2rem !important;
        margin-bottom: 10px !important;
    }
    
    p {
        font-size: 14px !important;
        line-height: 1.4 !important;
    }
    
    /* Improve button touch targets */
    .stButton > button {
        min-height: 48px !important; /* Increased minimum touch target size */
        width: 100% !important;
        margin-bottom: 12px !important;
        padding: 12px 16px !important;
        font-size: 16px !important;
        border-radius: 8px !important;
    }
    
    /* Make login buttons more touch-friendly */
    .login-button {
        display: block !important;
        width: 100% !important;
        padding: 14px 16px !important;
        text-align: center !important;
        font-size: 16px !important;
        min-height: 48px !important;
        border-radius: 8px !important;
    }
    
    /* Adjust form elements for touch */
    .stTextInput>div>div>input, 
    .stTextArea>div>div>textarea,
    .stNumberInput>div>div>input,
    .stSelectbox>div>div>div>div>div,
    .stMultiselect>div>div>div>div>div {
        min-height: 48px !important;
        padding: 14px 12px !important;
        font-size: 16px !important; /* Prevent auto-zoom on iOS */
        border-radius: 8px !important;
    }
    
    /* Adjust textarea size on mobile */
    .stTextArea>div>div>textarea {
        min-height: 100px !important;
    }
    
    /* Adjust spacing for mobile */
    .stForm > div:first-child {
        padding: 16px !important;
        border-radius: 8px !important;
    }
    
    .card, .user-info {
        padding: 16px !important;
        margin-bottom: 16px !important;
        border-radius: 8px !important;
    }
    
    /* Improve tab touch targets */
    .stTabs [data-baseweb="tab-list"] {
        display: flex !important;
        overflow-x: auto !important;
        overflow-y: hidden !important;
        white-space: nowrap !important;
        padding: 8px 4px !important;
    }
    
    .stTabs [data-baseweb="tab"] {
        padding: 12px 16px !important;
        min-height: 48px !important;
        font-size: 14px !important;
        flex: 0 0 auto !important;
    }
    
    /* Adjust expander for mobile */
    .streamlit-expanderHeader {
        padding: 14px 16px !important;
        min-height: 48px !important;
        font-size: 15px !important;
    }
    
    .streamlit-expanderContent {
        padding: 16px !important;
    }
    
    /* Adjust radio and checkbox for touch */
    .stRadio > div > div > label,
    .stCheckbox > div > div > label {
        min-height: 48px !important;
        padding: 12px 16px !important;
        display: flex !important;
        align-items: center !important;
        font-size: 15px !important;
    }
    
    /* Adjust table for mobile */
    .stTable, .dataframe {
        font-size: 14px !important;
        display: block !important;
        overflow-x: auto !important;
        white-space: nowrap !important;
        border-radius: 8px !important;
    }
    
    .stTable th, .dataframe th,
    .stTable td, .dataframe td {
        padding: 10px 12px !important;
    }
    
    /* Adjust sidebar for mobile */
    .css-1d391kg, .css-12oz5g7 {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* Improve column layout on mobile */
    .row-widget.stHorizontal {
        flex-wrap: wrap !important;
    }
    
    .row-widget.stHorizontal > div {
        flex: 1 1 100% !important;
        min-width: 100% !important;
        margin-bottom: 12px !important;
    }
    
    /* Fix for multi-column layouts */
    [data-testid="column"] {
        width: 100% !important;
        flex: 1 1 100% !important;
        margin-bottom: 12px !important;
    }
    
    /* Make sure columns stack nicely on mobile */
    .st-emotion-cache-1r6slb0 {
        max-width: 100% !important;
        flex: 1 1 100% !important;
    }
    
    /* Adjust alert messages */
    .stAlert > div {
        padding: 12px 16px !important;
        border-radius: 8px !important;
        font-size: 14px !important;
    }
    
    /* Fix for selectbox on mobile */
    .stSelectbox > div > div > div {
        min-height: 48px !important;
    }
    
    /* Fix for multiselect on mobile */
    .stMultiselect > div > div > div {
        min-height: 48px !important;
    }
    
    /* Theme toggle positioning for mobile */
    .theme-toggle-container {
        top: 14px !important;
        right: 14px !important;
    }
    
    /* Better spacing in forms */
    .stForm > div > div > div {
        margin-bottom: 16px !important;
    }
    
    /* Fix for data editor on mobile */
    [data-testid="stDataFrame"] {
        overflow-x: auto !important;
        width: 100% !important;
    }
    
    /* Improved scrolling on mobile */
    .main .block-container {
        padding-left: 16px !important;
        padding-right: 16px !important;
        max-width: 100% !important;
    }
    
    /* Better scrollbars on mobile */
    ::-webkit-scrollbar {
        width: 6px !important;
        height: 6px !important;
    }
    
    ::-webkit-scrollbar-track {
        background: transparent !important;
    }
    
    ::-webkit-scrollbar-thumb {
        background: var(--primary-color) !important;
        border-radius: 10px !important;
    }
}

/* Small phone screens */
@media (max-width: 480px) {
    /* Further reduce font sizes */
    h1 {
        font-size: 1.5rem !important;
    }
    
    h2 {
        font-size: 1.3rem !important;
    }
    
    h3 {
        font-size: 1.1rem !important;
    }
    
    /* Reduce padding to maximize space */
    .card, .user-info, .stForm > div:first-child {
        padding: 14px !important;
    }
    
    /* Stack all columns */
    [data-testid="column"] {
        width: 100% !important;
        margin-bottom: 10px !important;
    }
    
    /* Adjust container padding */
    .container {
        padding: 0 12px !important;
    }
    
    /* Reduce button padding on very small screens */
    .stButton > button {
        padding: 12px 14px !important;
    }
    
    /* More compact form padding */
    .stForm > div > div > div {
        margin-bottom: 12px !important;
    }
    
    /* Smaller text for limited space */
    p, li, .stAlert > div {
        font-size: 13px !important;
    }
    
    /* More compact tab display */
    .stTabs [data-baseweb="tab"] {
        padding: 10px 12px !important;
        font-size: 13px !important;
    }
    
    /* Adjust main container padding */
    .main .block-container {
        padding: 1.5rem 12px !important;
    }
    
    /* Theme toggle smaller on very small screens */
    .theme-toggle {
        width: 50px !important;
        height: 26px !important;
    }
    
    .theme-toggle-container {
        top: 10px !important;
        right: 10px !important;
    }
    
    .theme-slider:before {
        height: 18px !important;
        width: 18px !important;
    }
    
    .theme-toggle input:checked + .theme-slider:before {
        transform: translateX(24px) !important;
    }
}

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {
    /* Fix for notches and safe areas */
    .main .block-container {
        padding-left: max(16px, env(safe-area-inset-left)) !important;
        padding-right: max(16px, env(safe-area-inset-right)) !important;
        padding-bottom: max(16px, env(safe-area-inset-bottom)) !important;
    }
    
    /* Fix for bottom nav to respect safe area */
    .bottom-nav {
        padding-bottom: max(10px, env(safe-area-inset-bottom)) !important;
    }
    
    /* Prevent auto zooming on input fields */
    input[type="text"],
    input[type="number"],
    input[type="email"],
    input[type="password"],
    select,
    textarea {
        font-size: 16px !important;
    }
}
